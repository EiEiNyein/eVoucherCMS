@using eVoucherCMS.Models;
@model eVoucherCMS.Models.eVoucherInfo
<div class="container">
    <div class="pagetitle">
        <nav>
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/eVoucher/eVoucherList">eVoucher List</a></li>
                <li class="breadcrumb-item active">New</li>
            </ol>
        </nav>
    </div>

    <section class="section">
        <div class="row">
            <div class="col-lg-12">
                <div class="card">
                    <div class="card-body">
                        <div class="col-lg-12">

                             @using (Html.BeginForm("EVoucherNew", "eVoucher", FormMethod.Post, new { enctype = "multipart/form-data", id = "mainform" }))
                             {
                                @Html.AntiForgeryToken()

                                <div class="row mt-3">
                                    <div class="col-lg-6 mb-3">
                                        <div class="row">
                                            <label for="Title" class="col-sm-4 col-form-label">Title</label>
                                            <div class="col-sm-8">
                                                @Html.TextBoxFor(model => model.Title, "", new { @class = "form-control", placeholder = "TITLE", tabindex = "2", @maxlength = "1", autocomplete = "off", @required= "required" })
                                                @Html.ValidationMessageFor(model => model.Title, "", new { @class = "text-danger", @style = "font-size:small;" })
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 mb-3">
                                        <div class="row">
                                            <label for="ExpiryDate" class="col-sm-4 col-form-label">Expiry Date</label>
                                            <div class="col-sm-8">
                                                @Html.TextBoxFor(model => model.ExpiryDate, "", new {@type="date", @class = "form-control", placeholder = "EXPIRY DATE", tabindex = "2", autocomplete = "off", @required= "required" })
                                                @Html.ValidationMessageFor(model => model.ExpiryDate, "", new { @class = "text-danger", @style = "font-size:small;" })
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 mb-3">
                                        <div class="row">
                                            <label for="Description" class="col-sm-4 col-form-label">Description</label>
                                            <div class="col-sm-8">
                                                @Html.TextAreaFor(x => x.Description, new { @class = "form-control", tabindex = "3", placeholder = "DESCRIPTION", @maxlength = "200" , @required= "required"})
                                                @Html.ValidationMessageFor(model => model.Description, "", new { @class = "text-danger", @style = "font-size:small;" })
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 mb-3">
                                        <div class="row">
                                            <label for="Amount" class="col-sm-4 col-form-label">Amount</label>
                                            <div class="col-sm-8">
                                                @Html.TextBoxFor(model => model.Amount, "", new{ @type="number", @class = "form-control", placeholder = "AMOUNT",min=0,@Value=0, tabindex = "4", autocomplete = "off" , @required= "required"})
                                                @Html.ValidationMessageFor(model => model.Amount, "", new { @class = "text-danger", @style = "font-size:small;" })
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 mb-3">
                                        <div class="row">
                                            <label for="PaymentId" class="col-sm-4 col-form-label">Payment Method</label>
                                            <div class="col-sm-8">
                                                @Html.DropDownListFor(x => x.PaymentId, new SelectList(ViewBag.PaymentList, "PaymentId", "PaymentMethod"), "SELECT A PAYMENT METHOD", new { @class = "select2 form-control", tabindex = "5" , @required= "required"})
                                               @Html.ValidationMessageFor(model => model.PaymentId, "", new { @class = "text-danger", @style = "font-size:small;" })
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 mb-3">
                                        <div class="row">
                                            <label for="Discount" class="col-sm-4 col-form-label">Discount</label>
                                            <div class="col-sm-8">
                                                @Html.TextBoxFor(model => model.Discount, "", new{ @type="number", @class = "form-control", placeholder = "DISCOUNT",min=0,@Value=0, tabindex = "6", autocomplete = "off" , @required= "required"})
                                                @Html.ValidationMessageFor(model => model.Discount, "", new { @class = "text-danger", @style = "font-size:small;" })
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 mb-3">
                                        <div class="row">
                                            <label for="Quantity" class="col-sm-4 col-form-label">Quantity</label>
                                            <div class="col-sm-8">
                                                @Html.TextBoxFor(model => model.Quantity, "", new{ @type="number", @class = "form-control", placeholder = "QUANTITY",min=0,@Value=0, tabindex = "7", autocomplete = "off" , @required= "required"})
                                                @Html.ValidationMessageFor(model => model.Quantity, "", new { @class = "text-danger", @style = "font-size:small;" })
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 mb-3">
                                        <div class="row">
                                            <label for="BuyType" class="col-sm-4 col-form-label">Buy Type</label>
                                            <div class="col-sm-8">
                                                @Html.DropDownListFor(x => x.BuyType, new SelectList(
                                            new List<Object>
                                            {
                                            new  { value = "Self" , text = "MySelf Only"  },
                                            new  { value = "Other" , text = "Gift To Others" },
                                            }, "value", "text"), "---Select---", new { @class = "form-control select2", @tabindex = "8", @required = "required" })
                                                @Html.ValidationMessageFor(model => model.BuyType, "", new { @class = "text-danger", @style = "font-size:small;" })
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6  mb-3">
                                        <div class="row">
                                            <label for="Name" class="col-sm-4 col-form-label">Name</label>
                                            <div class="col-sm-8">
                                                @Html.TextBoxFor(model => model.Name, "", new { @class = "form-control", placeholder = "NAME", tabindex = "9", @maxlength = "50", autocomplete = "off", @required= "required" })
                                                @Html.ValidationMessageFor(model => model.Name, "", new { @class = "text-danger", @style = "font-size:small;" })
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6  mb-3">
                                        <div class="row">
                                            <label for="PhoneNo" class="col-sm-4 col-form-label">Phone No</label>
                                            <div class="col-sm-8">
                                                @Html.TextBoxFor(model => model.PhoneNo, "", new { @class = "form-control", placeholder = "PHONE NO.", tabindex = "10", @maxlength = "50", autocomplete = "off", @required= "required" })
                                                @Html.ValidationMessageFor(model => model.PhoneNo, "", new { @class = "text-danger", @style = "font-size:small;" })
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6  mb-3 GiftPerUserLimit" hidden>
                                        <div class="row">
                                            <label for="GiftPerUserLimit" class="col-sm-4 col-form-label">Gift per user limit</label>
                                            <div class="col-sm-8">
                                                @Html.TextBoxFor(model => model.GiftPerUserLimit, "", new { @class = "form-control", placeholder = "GIFT PER USER LIMIT", tabindex = "11", min = 0, autocomplete = "off", @required= "required" })
                                                @Html.ValidationMessageFor(model => model.GiftPerUserLimit, "", new { @class = "text-danger", @style = "font-size:small;" })
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6  mb-3">
                                        <div class="row">
                                            <label for="MaxBalance" class="col-sm-4 col-form-label">Max Voucher</label>
                                            <div class="col-sm-8">
                                                @Html.TextBoxFor(model => model.MaxBalance, "", new { @class = "form-control", placeholder = "MAX VOUCHER", tabindex = "12", min=0, autocomplete = "off", @required= "required" })
                                                @Html.ValidationMessageFor(model => model.MaxBalance, "", new { @class = "text-danger", @style = "font-size:small;" })
                                            </div>
                                        </div>
                                    </div>
                                    <div class="text-center">
                                        <button type="submit" class="btn btn-primary">Submit</button>
                                        <button type="reset" class="btn btn-secondary">Reset</button>
                                        <a href="/eVoucher/EvoucherList/" type="button" class="btn btn-danger">Cancel</a>
                                    </div>
                                </div>
                             }

                        </div>

                    </div>
                </div>
            </div>
        </div>
    </section>
</div>

@section Scripts
{
    <script type="text/javascript">
       
        $(document).ready(function () {
            BuyType();
            $("#BuyType").change(function(){
                BuyType();
            })

                (function ($) {
                    var defaultOptions = {
                        errorClass: 'has-error',
                        validClass: '',
                        highlight: function (element, errorClass, validClass) {
                            $(element).closest(".form-group")
                                .addClass(errorClass)
                                .removeClass(validClass);
                        },
                        unhighlight: function (element, errorClass, validClass) {
                            $(element).closest(".form-group")
                                .removeClass(errorClass)
                                .addClass(validClass);
                        }
                    };

                    $.validator.setDefaults(defaultOptions);

                    $.validator.unobtrusive.options = {
                        errorClass: defaultOptions.errorClass,
                        validClass: defaultOptions.validClass,
                    };
                })(jQuery);

            $(document).on('keyup keypress', function (e) {
                if (e.which == 13) {
                    e.preventDefault();
                    return false;
                }
            });
        })


        function BuyType(){
            if ($("#BuyType").val() == "Other"){
              //  $(".GiftPerUserLimit").show();
                $(".GiftPerUserLimit").attr("hidden", false);
            }
            else if ($("#BuyType").val() == "Self"){
               // $(".GiftPerUserLimit").hide();
                $(".GiftPerUserLimit").attr("hidden", true);
            }
            else{
                $(".GiftPerUserLimit").attr("hidden",true);
            } 
        }
    </script>
}
